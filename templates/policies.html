{% extends 'base.html' %}
{% block title %}Policies - GRC Risk Assessment{% endblock %}

{% block content %}
<div class="page-header">
    <div>
        <h1>Governance Policies</h1>
        <p class="subtitle">Manage organizational security and compliance policies</p>
    </div>
    <a href="{{ url_for('add_policy') }}" class="btn btn-primary">+ Add Policy</a>
</div>

{% if policies %}
<div class="policies-grid">
    {% for policy in policies %}
    <div class="policy-card">
        <div class="policy-header">
            <span class="policy-category">
                {% if policy.category == 'Security' %}ğŸ”’
                {% elif policy.category == 'Privacy' %}ğŸ”
                {% elif policy.category == 'Access Control' %}ğŸšª
                {% elif policy.category == 'Incident Response' %}ğŸš¨
                {% else %}ğŸ“‹{% endif %}
                {{ policy.category }}
            </span>
            <span class="policy-status status-{{ policy.status|lower|replace(' ', '-') }}">{{ policy.status }}</span>
        </div>
        <div class="policy-body">
            <h3>{{ policy.name }}</h3>
            <p class="policy-description">{{ policy.description or 'No description provided.' }}</p>
        </div>
        <div class="policy-meta">
            <span><strong>Version:</strong> {{ policy.version }}</span>
            <span><strong>Owner:</strong> {{ policy.owner or 'Unassigned' }}</span>
        </div>
        <div class="policy-actions">
            <a href="{{ url_for('view_policy', id=policy.id) }}" class="btn btn-sm">View</a>
            <a href="{{ url_for('edit_policy', id=policy.id) }}" class="btn btn-sm btn-outline">Edit</a>
            <a href="{{ url_for('delete_policy', id=policy.id) }}" class="btn btn-sm btn-danger" 
               onclick="return confirm('Delete this policy?')">Delete</a>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state card">
    <div class="card-body center">
        <div class="empty-icon">ğŸ“‹</div>
        <h3>No Policies Yet</h3>
        <p>Create governance policies to define your organization's security standards.</p>
        <a href="{{ url_for('add_policy') }}" class="btn btn-primary">Add First Policy</a>
    </div>
</div>
{% endif %}

<div class="info-box">
    <h4>Policy Categories</h4>
    <ul class="category-legend">
        <li>ğŸ”’ <strong>Security</strong> â€” Information security and cybersecurity policies</li>
        <li>ğŸ” <strong>Privacy</strong> â€” Data protection and privacy policies</li>
        <li>ğŸšª <strong>Access Control</strong> â€” Authentication and authorization policies</li>
        <li>ğŸš¨ <strong>Incident Response</strong> â€” Security incident handling procedures</li>
    </ul>
</div>
{% endblock %}
